<!DOCTYPE html>
<html>
  <head>
    <link rel="stylesheet" type="text/css" href="../sakura.css" />
    <title>WebUSB DFU</title>
    <script src="dfu.js"></script>
    <script src="dfuse.js"></script>
    <script src="FileSaver.js"></script>
    <script src="dfu-util.js"></script>
    <style>
      p.warning {
        color: red;
      }
      p.error {
        color: red;
        font-weight: bold;
      }
      label.radio {
        display: inline;
      }
      input:invalid {
        color:red;
      }
    </style>
  </head>
  <body>
    <p>
      <span id="status"></span>
    </p>
    <p>
      <button id="connect">Connect</button>
    </p>

    <div class="log" id="uploadLog"></div>

    <p>
        <button id="upload" disabled="true">Upload</button>
    </p>

    <dialog id="interfaceDialog">
      Your device has multiple DFU interfaces. Select one from the list below:
      <form id="interfaceForm" method="dialog">
        <button id="selectInterface" type="submit">Select interface</button>
      </form>
    </dialog>
    <p>
      <div id="usbInfo" style="white-space: pre"></div>
      <div id="dfuInfo" style="white-space: pre"></div>
    </p>
<!--    <fieldset>
      <legend>Runtime mode</legend>
      <button id="detach" disabled="true">Detach DFU</button>
    </fieldset>-->
        <p>
      <label for="firmwareFiles">Firmware:</label>
      <input list="firmwareFiles" type="text" name="firmwareFile" id="firmwareFile"/>
      <datalist id="firmwareFiles">
        <option value="https://github.com/andyothling/firmware-updater/releases/download/dfu/dsfw.bin">Dark Star</option>
        <option value="https://github.com/andyothling/firmware-updater/releases/download/dfu/bffw.bin">Black Fountain</option>
        <option value="bgfw.bin">Bathing</option>
      </datalist>
    </p>
    <fieldset style="display: none;">
      <form id="configForm">
        <fieldset>
          <p>
            <input type="file" id="firmwareFile" name="file" disabled="true"/>
          </p>
          <p>
            <button id="download" disabled="true">Download</button>
          </p>
          <div class="log" id="downloadLog"></div>
        </fieldset>
      </form>
    </fieldset>
  </body>
</html>
